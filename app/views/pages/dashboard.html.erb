<section class="section dashboard p-0">

  <div class="pagetitle">
    <h1>Wallets</h1>
  </div>

  <div class="row">

    <!-- Left side columns -->
    <div class="col-lg-8">

      <div class="row">
        <!-- Wallets Tabs - Tabs -->
        <%# <div class="col-12">


        </div> %>
        <!-- End - Wallets Tabs - Tabs -->

        <!-- Wallet Table -->
        <div class="col-12">

          <!-- Wallets Tabs - Tabs -->
          <nav>

            <div class="nav nav-tabs" id="nav-tab" role="tablist">

              <% @wallets.each do |wallet| %>
                <button class="<%= wallet == @wallets.first ? "nav-link active" : "nav-link" %>" id="nav-<%= wallet.name %>-tab" data-bs-toggle="tab" data-bs-target="#nav-<%= wallet.name %>" type="button" role="tab" aria-controls="nav-<%= wallet.name %>" aria-selected="true"><%= wallet.name %></button>
              <% end %>

            </div>

          </nav>
          <!-- End - Wallets Tabs - Tabs -->

          <div class="card recent-sales">

            <div class="card-body">

              <h5 class="card-title"> Coins <span>| owned</span></h5>

              <!-- Wallets Tabs - Content -->
              <div class="tab-content" id="nav-tabContent">

                <% @wallets.each do |wallet| %>
                  <% total = [] %>
                  <div class="<%= wallet == @wallets.first ? "tab-pane fade show active" : "tab-pane fade" %>" id="nav-<%= wallet.name %>" role="tabpanel" aria-labelledby="nav-<%= wallet.name %>-tab">

                    <table class="table table-borderless datatable">

                      <thead>

                        <tr>

                          <th scope="col">#</th>
                          <th scope="col">Coin</th>
                          <th scope="col">Amount</th>
                          <th scope="col">Curren Price</th>
                          <th scope="col">Value (U$)</th>

                        </tr>

                      </thead>

                      <tbody>

                        <% assets = wallet.assets %>
                        <% assets.each do |asset| %>
                          <% coin = coin(@data, asset) %>
                          <% total.push((asset.amount*coin[:current_price]).round(2)) %>
                          <tr>

                            <th scope="row"><a href="#"><%= asset.coin_ticker %></a></th>
                            <td><%= coin[:name] %></td>
                            <td><%= asset.amount.round(2) %></td>
                            <td><%= coin[:current_price].round(2) %></td>
                            <td><%= asset.amount.round(2)*coin[:current_price].round(2) %></td>

                          </tr>
                        <% end %>

                      </tbody>

                    </table>

                    <!-- Total Section -->
                    <div class="d-flex">

                      <!-- Total U$ Section -->
                      <div class="card-body">

                        <h5 class="card-title">Total <span>| USD</span></h5>

                        <div class="d-flex align-items-center">

                          <div class="ps-3">

                            <h6>$<%= total.sum.round(2) %></h6>
                            <span class="text-success small pt-1 fw-bold">12%</span> <span class="text-muted small pt-2 ps-1">increase</span>

                          </div>

                        </div>

                      </div>
                      <!-- End - Total U$ Section -->

                      <!-- Total BTC Section -->
                      <div class="card-body">
                        <h5 class="card-title">Total <span>| BTC</span></h5>

                        <div class="d-flex align-items-center">
                          <div class="ps-3">
                            <% btc = @data.select{ |key| key["symbol"] == 'btc' }.first.transform_keys(&:to_sym) %>
                            <h6><%= (total.sum/btc[:current_price]).round(6) %></h6>
                            <span class="text-success small pt-1 fw-bold">8%</span> <span class="text-muted small pt-2 ps-1">increase</span>

                          </div>
                        </div>
                      </div>
                      <!-- End - Total BTC Section -->

                    </div>
                    <!-- end Total Section -->

                  </div>
                <% end %>

                </div>

              </div>
              <!-- End - Wallets Tabs - Content -->

            </div>

        </div>
        <!-- Wallet Table -->


      </div>
    </div><!-- End Left side columns -->

    <!-- Right side columns -->
    <div class="col-lg-4">

      <!-- Recent Activity -->
      <div class="card">
        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>

        <div class="card-body">
          <h5 class="card-title">Market Overall <span>| Today</span></h5>

          <div class="activity">

            <div class="activity-item d-flex">
              <img src="https://alternative.me/crypto/fear-and-greed-index.png" style="width:300px; margin:0 auto" alt="">
            </div><!-- End activity item-->

            <div class="activity-item d-flex">
              <div class="activite-label">total market cap</div>
              <i class='bi bi-circle-fill activity-badge text-success align-self-start'></i>
              <div class="activity-content">
                Quia quae rerum explicabo officiis beatae
              </div>
            </div><!-- End activity item-->


            <div class="activity-item d-flex">
              <div class="activite-label">2 hrs</div>
              <i class='bi bi-circle-fill activity-badge text-primary align-self-start'></i>
              <div class="activity-content">
                Voluptates corrupti molestias voluptatem
              </div>
            </div><!-- End activity item-->

            <div class="activity-item d-flex">
              <div class="activite-label">1 day</div>
              <i class='bi bi-circle-fill activity-badge text-info align-self-start'></i>
              <div class="activity-content">
                Tempore autem saepe <a href="#" class="fw-bold text-dark">occaecati voluptatem</a> tempore
              </div>
            </div><!-- End activity item-->

            <div class="activity-item d-flex">
              <div class="activite-label">2 days</div>
              <i class='bi bi-circle-fill activity-badge text-warning align-self-start'></i>
              <div class="activity-content">
                Est sit eum reiciendis exercitationem
              </div>
            </div><!-- End activity item-->

            <div class="activity-item d-flex">
              <div class="activite-label">4 weeks</div>
              <i class='bi bi-circle-fill activity-badge text-muted align-self-start'></i>
              <div class="activity-content">
                Dicta dolorem harum nulla eius. Ut quidem quidem sit quas
              </div>
            </div><!-- End activity item-->

          </div>

        </div>
      </div><!-- End Recent Activity -->

      <!-- Budget Report -->
      <div class="card">
        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>

        <div class="card-body pb-0">
          <h5 class="card-title">Portfolio Ballance <span>| Now</span></h5>

          <div id="trafficChart" style="min-height: 400px;" class="echart"></div>


        </div>
      </div><!-- End Budget Report -->

      <!-- Website Traffic -->
      <div class="card">
        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>

        <div class="card-body pb-0">
          <h5 class="card-title">Website Traffic <span>| Today</span></h5>

          <div id="trafficChart" style="min-height: 400px;" class="echart"></div>

          <script>
            document.addEventListener("DOMContentLoaded", () => {
              echarts.init(document.querySelector("#trafficChart")).setOption({
                tooltip: {
                  trigger: 'item'
                },
                legend: {
                  top: '5%',
                  left: 'center'
                },
                series: [{
                  name: 'Access From',
                  type: 'pie',
                  radius: ['40%', '70%'],
                  avoidLabelOverlap: false,
                  label: {
                    show: false,
                    position: 'center'
                  },
                  emphasis: {
                    label: {
                      show: true,
                      fontSize: '18',
                      fontWeight: 'bold'
                    }
                  },
                  labelLine: {
                    show: false
                  },
                  data: [{
                      value: 1048,
                      name: 'Search Engine'
                    },
                    {
                      value: 735,
                      name: 'Direct'
                    },
                    {
                      value: 580,
                      name: 'Email'
                    },
                    {
                      value: 484,
                      name: 'Union Ads'
                    },
                    {
                      value: 300,
                      name: 'Video Ads'
                    }
                  ]
                }]
              });
            });
          </script>

        </div>
      </div><!-- End Website Traffic -->

      <!-- News & Updates Traffic -->
      <div class="card">
        <div class="filter">
          <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <li class="dropdown-header text-start">
              <h6>Filter</h6>
            </li>

            <li><a class="dropdown-item" href="#">Today</a></li>
            <li><a class="dropdown-item" href="#">This Month</a></li>
            <li><a class="dropdown-item" href="#">This Year</a></li>
          </ul>
        </div>

        <div class="card-body pb-0">
          <h5 class="card-title">News &amp; Updates <span>| Today</span></h5>

          <div class="news">
            <div class="post-item clearfix">
              <img src="assets/img/news-1.jpg" alt="">
              <h4><a href="#">Nihil blanditiis at in nihil autem</a></h4>
              <p>Sit recusandae non aspernatur laboriosam. Quia enim eligendi sed ut harum...</p>
            </div>

            <div class="post-item clearfix">
              <img src="assets/img/news-2.jpg" alt="">
              <h4><a href="#">Quidem autem et impedit</a></h4>
              <p>Illo nemo neque maiores vitae officiis cum eum turos elan dries werona nande...</p>
            </div>

            <div class="post-item clearfix">
              <img src="assets/img/news-3.jpg" alt="">
              <h4><a href="#">Id quia et et ut maxime similique occaecati ut</a></h4>
              <p>Fugiat voluptas vero eaque accusantium eos. Consequuntur sed ipsam et totam...</p>
            </div>

            <div class="post-item clearfix">
              <img src="assets/img/news-4.jpg" alt="">
              <h4><a href="#">Laborum corporis quo dara net para</a></h4>
              <p>Qui enim quia optio. Eligendi aut asperiores enim repellendusvel rerum cuder...</p>
            </div>

            <div class="post-item clearfix">
              <img src="assets/img/news-5.jpg" alt="">
              <h4><a href="#">Et dolores corrupti quae illo quod dolor</a></h4>
              <p>Odit ut eveniet modi reiciendis. Atque cupiditate libero beatae dignissimos eius...</p>
            </div>

          </div><!-- End sidebar recent posts-->

        </div>
      </div><!-- End News & Updates -->

    </div><!-- End Right side columns -->

  </div>
</section>
